(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},32:function(e,t,a){e.exports=a(50)},40:function(e,t,a){},42:function(e,t){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),i=a(8),s=a(11),l=a(3),u=(a(40),a(4)),p=a(5),m=a(7),d=a(6),h=a(21),f=a.n(h),y=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.playerName,a=e.playerScore,n=e.playerEmail;return console.log(a),r.a.createElement("header",null,r.a.createElement("img",{className:"icon-header","data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(f()(n).toString()),alt:"ProfileAVATAR"}),r.a.createElement("p",{"data-testid":"header-player-name"},"Player:"," ",t),r.a.createElement("p",null,"Score:"," ",r.a.createElement("span",{"data-testid":"header-score"},"".concat(a))))}}]),a}(r.a.Component);y.defaultProps={playerScore:0};var b=Object(i.b)((function(e){return{playerName:e.login.playerName,playerScore:e.player.score,playerEmail:e.login.playerEmail}}))(y),E=a(15),v=a.n(E),g=a(17),O=a(31),S=function(e){return{type:"SHOW_TIMER",payload:e}},j=function(e){return{type:"TIME_OVER",payload:e}},A=function(e){return{type:"SHOW_BUTTON",payload:e}},k=a(14),T=a.n(k),w=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).playAgainClick=function(){var t=e.props,a=t.history,n=t.resetScore,r=t.resetAssertions;n(),r(),a.push("/Projeto-Trivia")},e.rankingButtonClick=function(){var t=e.props,a=t.history,n=t.resetScore,r=t.resetAssertions;n(),r(),a.push("/ranking")},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.totalPoints,a=e.getScore;return r.a.createElement("div",null,r.a.createElement(b,null),r.a.createElement("header",{className:"App-header"},r.a.createElement(s.b,{to:"/Projeto-Trivia"},r.a.createElement("img",{src:T.a,className:"App-logo",alt:"logo"}))),t<3?r.a.createElement("p",{"data-testid":"feedback-text"},"Could be better..."):r.a.createElement("p",{"data-testid":"feedback-text"},"Well Done!"),r.a.createElement("p",null,"Score:"," ",r.a.createElement("span",{"data-testid":"feedback-total-score"},a)),r.a.createElement("p",null,"Hits:"," ",r.a.createElement("span",{"data-testid":"feedback-total-question"},t)),r.a.createElement("button",{type:"button",onClick:this.playAgainClick,"data-testid":"btn-play-again"},"Play Again"),r.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:this.rankingButtonClick},"Ranking"))}}]),a}(r.a.Component),C=Object(i.b)((function(e){return{getScore:e.player.score,totalPoints:e.player.assertions}}),(function(e){return{resetScore:function(t){e({type:"RESET_SCORE"})},resetAssertions:function(t){e({type:"RESET_ASSERTIONS"})}}}))(w),N=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).alternate=function(t){for(var a=e.props.question.correct_answer,n=0;n<t.length;n+=1)0!==t[n].classList.length&&(t[n].innerText===a?t[n].classList.add("question-correct"):t[n].classList.add("question-incorrect"))},e.validationAnswer=function(t){var a=e.props,n=a.question,r=a.timer,o=a.sumScoreAction,c=a.score,i=a.sumPoints,s=0;"correct-answer"===t.id&&("easy"===n.difficulty&&(s+=1,o(10+1*r+c),i(s)),"medium"===n.difficulty&&(s+=1,o(10+2*r+c),i(s)),"hard"===n.difficulty&&(s+=1,o(10+3*r+c),i(s)))},e.handleClick=function(t){var a=t.target,n=e.props,r=n.question.correct_answer,o=n.reciveButton,c=n.timeOverAction;a.innerText===r?a.classList.add("question-correct"):a.classList.add("question-incorrect");var i=document.querySelectorAll(".button");e.alternate(i),o(!0),e.validationAnswer(a),c(!0)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.question,n=t.randomArray,o=t.timeIsOver,c=0;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{"data-testid":"question-category"},a.category),r.a.createElement("p",{"data-testid":"question-text"},a.question),r.a.createElement("div",{"data-testid":"answer-options"},n.map((function(t){return t===a.correct_answer?r.a.createElement("button",{"data-testid":"correct-answer",id:"correct-answer",type:"button",key:"correct_answer",className:"button",onClick:e.handleClick,disabled:o},t):(c+=1,r.a.createElement("button",{"data-testid":"wrong-answer-".concat(c-1),id:"incorrect-answer",type:"button",key:c,className:"button",onClick:e.handleClick,disabled:o},t))}))))}}]),a}(r.a.Component);N.defaultProps={score:0};var I=Object(i.b)((function(e){return{timeIsOver:e.game.timeOver,showButton:e.game.showButton,score:e.player.score,timer:e.game.timer}}),(function(e){return{reciveButton:function(t){return e(A(t))},sumScoreAction:function(t){return e(function(e){return{type:"SUM_SCORE",payload:e}}(t))},sumTotalPointsAction:function(){return e({type:"SUM_TOTAL_POINTS"})},timeOverAction:function(t){return e(j(t))},sumPoints:function(){return e({type:"SUM_TOTAL_POINTS"})}}}))(N),_=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).timeToAnswer=function(){var t=e.props,a=t.showTimerAction,n=t.timeOverAction,r=t.reciveButton;setInterval((function(){var t=e.props.timer;t>0?a(t-=1):0===t&&(n(!0),a(0),r(!0))}),1e3)},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.timeToAnswer()}},{key:"render",value:function(){var e=this.props.timer;return r.a.createElement("p",{className:"timer"},"Timer:"," ",e)}}]),a}(r.a.Component),P=Object(i.b)((function(e){return{timer:e.game.timer}}),(function(e){return{showTimerAction:function(t){return e(S(t))},timeOverAction:function(t){return e(j(t))},reciveButton:function(t){return e(A(t))}}}))(_),q=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).componentDidMount=function(){(0,e.props.fetchAPI)("https://opentdb.com/api.php?amount=5&token=".concat(localStorage.getItem("token")))},e.saveInLocalStorage=function(){var t=e.props,a=t.player,n=t.login,r=localStorage.getItem("ranking"),o={name:n.playerName,score:a.score,picture:n.playerEmail};if(null===r)localStorage.setItem("ranking",JSON.stringify([o]));else{var c=JSON.parse([r]);console.log(c),c.push(o),localStorage.setItem("ranking",JSON.stringify(c))}},e.onClickChange=function(){var t=e.props,a=t.history,n=t.showTimerAction,r=t.timeOverAction,o=t.reciveButton,c=e.state.indexQuestions;e.setState((function(e){return{indexQuestions:e.indexQuestions+1}})),4===c&&(e.saveInLocalStorage(),a.push("/feedback")),n(30),r(!1),o(!1),e.removeClass()},e.removeClass=function(){for(var e=document.getElementsByClassName("button"),t=e.length-1;t>=0;t-=1)e[t].className="button"},e.state={indexQuestions:0},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state.indexQuestions,t=this.props,a=t.questions,n=t.requestAPI,o=t.requestState,c=t.randomArray,i=t.showButton;return 3===o?r.a.createElement(l.a,{to:"/"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement("header",{className:"App-header"},r.a.createElement(s.b,{to:"/Projeto-Trivia"},r.a.createElement("img",{src:T.a,className:"App-logo",alt:"logo"}))),r.a.createElement("div",{className:"div-game"},r.a.createElement(P,null),!n&&r.a.createElement(I,{question:a[e],randomArray:c[e]}),i?r.a.createElement("button",{id:"buttonNext",type:"button","data-testid":"btn-next",onClick:this.onClickChange},"Next"):""))}}]),a}(r.a.Component);q.defaultProps={questions:[],requestAPI:!0,requestState:0,randomArray:[]};var R=Object(i.b)((function(e){return{questions:e.game.questions,requestAPI:e.game.requestAPI,requestState:e.game.requestState,randomArray:e.game.randomArray,showButton:e.game.showButton,player:e.player,login:e.login}}),(function(e){return{fetchAPI:function(t){return e(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REQUEST_API"}),t.prev=1,t.next=4,fetch(e);case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,a({type:"REQUEST_SUCSSES",questions:(o=r).results,requestState:o.response_code,randomArray:o.results.map((function(e){return[e.correct_answer].concat(Object(O.a)(e.incorrect_answers)).sort((function(){return Math.random()-.5}))}))}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a({type:"REQUEST_ERROR"});case 14:case"end":return t.stop()}var o}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))},reciveButton:function(t){return e(A(t))},showTimerAction:function(t){return e(S(t))},timeOverAction:function(t){return e(j(t))}}}))(q),x=a(22),B=function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api_token.php?command=request");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(x.a)({},n,r),(function(){var t=e.state,a=t.playerName,n=t.playerEmail;e.setState({isButtonDisabled:0===a.length||!/\S+@\S+\.\S+/.test(n)})}))},e.handleClick=Object(g.a)(v.a.mark((function t(){var a,n,r,o,c,i,s,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.history,r=a.sendPlayerInfoToStore,o=e.state,c=o.playerName,i=o.playerEmail,t.next=4,B();case 4:return s=t.sent,l=s.token,r(c,i),t.next=9,localStorage.setItem("token",l);case 9:n.push("/game");case 10:case"end":return t.stop()}}),t)}))),e.state={playerName:"",playerEmail:"",isButtonDisabled:!0},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state,t=e.playerName,a=e.playerEmail,n=e.isButtonDisabled,o=this.props.history;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},r.a.createElement(s.b,{to:"/Projeto-Trivia"},r.a.createElement("img",{src:T.a,className:"App-logo",alt:"logo"}))),r.a.createElement("form",null,r.a.createElement("h1",null,"Login"),r.a.createElement("label",{htmlFor:"input-player-name"},"Jogador:",r.a.createElement("input",{type:"text","data-testid":"input-player-name",id:"input-player-name",name:"playerName",placeholder:"Insira o nome do jogador",onChange:this.handleInputChange,value:t})),r.a.createElement("label",{htmlFor:"input-gravatar-email"},"E-mail:",r.a.createElement("input",{type:"email","data-testid":"input-gravatar-email",id:"input-gravatar-email",name:"playerEmail",placeholder:"Insira o e-mail do jogador",onChange:this.handleInputChange,value:a})),r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:n,onClick:this.handleClick},"Play")),r.a.createElement("button",{type:"button",className:"cfg-button","data-testid":"btn-settings",onClick:function(){o.push("/settings")}},"Configura\xe7\xf5es"))}}]),a}(r.a.Component),L=Object(i.b)(null,(function(e){return{sendPlayerInfoToStore:function(t,a){return e(function(e,t){return{type:"PLAYER_INFO_TO_STORE",playerName:e,playerEmail:t}}(t,a))}}}))(U),M=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).goHomeButton=function(){e.props.history.push("/Projeto-Trivia")},e}return Object(p.a)(a,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return t.score-e.score}));return console.log(e),r.a.createElement("div",null,r.a.createElement("header",{className:"App-header"},r.a.createElement(s.b,{to:"/Projeto-Trivia"},r.a.createElement("img",{src:T.a,className:"App-logo",alt:"logo"}))),r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),e.map((function(e,t){return r.a.createElement("div",{key:t,className:"div-ranking"},r.a.createElement("img",{src:"https://www.gravatar.com/avatar/".concat(f()(e.picture).toString()),alt:"GravatarImage"}),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("p",{"data-testid":"player-score-".concat(t)},e.score))})),r.a.createElement("button",{type:"button",id:"go-home-rank","data-testid":"btn-go-home",onClick:this.goHomeButton},"Go Home!"))}}]),a}(r.a.Component),Q=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},r.a.createElement(s.b,{to:"/Projeto-Trivia"},r.a.createElement("img",{src:T.a,className:"App-logo",alt:"logo"}))),r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es:"))}}]),a}(r.a.Component);function F(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/Projeto-Trivia",exact:!0,component:L}),r.a.createElement(l.b,{path:"/game",component:R}),r.a.createElement(l.b,{path:"/settings",component:Q}),r.a.createElement(l.b,{path:"/feedback",component:C}),r.a.createElement(l.b,{path:"/ranking",component:M})))}a(49);var H=a(18),D=a(29),J=a(30),W=a(2),V={token:"",playerName:"",playerEmail:""},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_TOKEN_SUCCESS":return Object(W.a)(Object(W.a)({},e),{},{token:t.token});case"PLAYER_INFO_TO_STORE":return Object(W.a)(Object(W.a)({},e),{},{playerName:t.playerName,playerEmail:t.playerEmail});default:return e}},Y={player:{score:0},timer:30,timeOver:!1,showButton:!1},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_API":return Object(W.a)(Object(W.a)({},e),{},{requestAPI:!0});case"REQUEST_SUCSSES":return Object(W.a)(Object(W.a)({},e),{},{questions:t.questions,player:{score:0},randomArray:t.randomArray,requestAPI:!1,requestState:t.requestState});case"SHOW_TIMER":return Object(W.a)(Object(W.a)({},e),{},{timer:t.payload});case"TIME_OVER":return Object(W.a)(Object(W.a)({},e),{},{timeOver:t.payload});case"SHOW_BUTTON":return Object(W.a)(Object(W.a)({},e),{},{showButton:t.payload});default:return e}},z={score:0,assertions:0},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUM_SCORE":return Object(W.a)(Object(W.a)({},e),{},{score:t.payload});case"SUM_TOTAL_POINTS":return Object(W.a)(Object(W.a)({},e),{},{assertions:e.assertions+1});case"RESET_SCORE":return Object(W.a)(Object(W.a)({},e),{},{score:0});case"RESET_ASSERTIONS":return Object(W.a)(Object(W.a)({},e),{},{assertions:0});default:return Object(W.a)({},e)}},Z=Object(H.combineReducers)({login:G,game:K,player:X}),$=Object(H.createStore)(Z,Object(D.composeWithDevTools)(Object(H.applyMiddleware)(J.a)));window.Cypress&&(window.store=$);var ee=$;c.a.render(r.a.createElement(i.a,{store:ee},r.a.createElement(s.a,null,r.a.createElement(F,null))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.37a4d00a.chunk.js.map